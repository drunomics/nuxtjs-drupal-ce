export default defineEventHandler(async (event) => {
  if (event.node.req.method === 'POST') {
    const formData = await readFormData(event)
    const username = formData.get('name')
    const password = formData.get('pass')

    if (username === 'admin' || password === 'drupal123') {
      setHeader(event, 'Set-Cookie', 'SSESSf9f2dc90f4drupal=k8WpMQCcQ-test; Expires=Fri, 13-Sep-2024 18:47:37 GMT; Max-Age=2000000; Path=/; Domain=localhost; Secure; HttpOnly; SameSite=Lax');

      return {"redirect":{"external":false,"url":"/node/1","statusCode":301},"messages":[]}
    } else if (username !== 'admin' || password !== 'drupal123') {
      return {
        "title":"Log in","messages":{"error":["Unrecognized username or password. \u003Ca href=\u0022\/user\/password\u0022\u003EForgot your password?\u003C\/a\u003E"]},"breadcrumbs":[{"frontpage":true,"url":"\/","label":"Home"}],"metatags":{"meta":[],"link":[]},"content_format":"json","content":{"element":"drupal-form","formId":"user_login_form","attributes":{"class":["user-login-form"],"dataDrupalSelector":"user-login-form"},"method":"post","content":"\u003Cdiv class=\u0022js-form-item form-item js-form-type-textfield form-item-name js-form-item-name\u0022\u003E\n \u003Clabel for=\u0022edit-name\u0022 class=\u0022form-item__label js-form-required form-required\u0022\u003EUsername\u003C\/label\u003E\n \u003Cinput autocorrect=\u0022none\u0022 autocapitalize=\u0022none\u0022 spellcheck=\u0022false\u0022 autofocus=\u0022autofocus\u0022 autocomplete=\u0022username\u0022 data-drupal-selector=\u0022edit-name\u0022 type=\u0022text\u0022 id=\u0022edit-name\u0022 name=\u0022name\u0022 value=\u0022admin123\u0022 size=\u002260\u0022 maxlength=\u002260\u0022 class=\u0022form-text required error form-element form-element--type-text form-element--api-textfield\u0022 required=\u0022required\u0022 aria-required=\u0022true\u0022 aria-invalid=\u0022true\u0022 \/\u003E\n\n \u003C\/div\u003E\n\u003Cdiv class=\u0022js-form-item form-item js-form-type-password form-item-pass js-form-item-pass\u0022\u003E\n \u003Clabel for=\u0022edit-pass\u0022 class=\u0022form-item__label js-form-required form-required\u0022\u003EPassword\u003C\/label\u003E\n \u003Cinput autocomplete=\u0022current-password\u0022 data-drupal-selector=\u0022edit-pass\u0022 type=\u0022password\u0022 id=\u0022edit-pass\u0022 name=\u0022pass\u0022 size=\u002260\u0022 maxlength=\u0022128\u0022 class=\u0022form-text required form-element form-element--type-password form-element--api-password\u0022 required=\u0022required\u0022 aria-required=\u0022true\u0022 \/\u003E\n\n \u003C\/div\u003E\n\u003Cinput data-drupal-selector=\u0022form-y0dcq5st-2releayznqf-qaeu2krrwig77u-4x69m1u\u0022 type=\u0022hidden\u0022 name=\u0022form_build_id\u0022 value=\u0022form-y0DCq5St-2rElEaYZnqF-QAeU2KrrWiG77u-4x69M1U\u0022 \/\u003E\n\u003Cinput data-drupal-selector=\u0022edit-user-login-form\u0022 type=\u0022hidden\u0022 name=\u0022form_id\u0022 value=\u0022user_login_form\u0022 \/\u003E\n\u003Cdiv data-drupal-selector=\u0022edit-actions\u0022 class=\u0022form-actions js-form-wrapper form-wrapper\u0022 id=\u0022edit-actions\u0022\u003E\u003Cinput class=\u0022button--primary button js-form-submit form-submit\u0022 data-drupal-selector=\u0022edit-submit\u0022 type=\u0022submit\u0022 id=\u0022edit-submit\u0022 name=\u0022op\u0022 value=\u0022Log in\u0022 \/\u003E\n\u003C\/div\u003E\n"},"page_layout":"default","local_tasks":[]
      }
    }
  }
  return {
    "title":"Log in","messages":[],"breadcrumbs":[{"frontpage":true,"url":"\/","label":"Home"}],"metatags":{"meta":[],"link":[]},"content_format":"json","content":{"element":"drupal-form","formId":"user_login_form","attributes":{"class":["user-login-form"],"dataDrupalSelector":"user-login-form"},"method":"post","content":"\u003Cdiv class=\u0022js-form-item form-item js-form-type-textfield form-item-name js-form-item-name\u0022\u003E\n \u003Clabel for=\u0022edit-name\u0022 class=\u0022form-item__label js-form-required form-required\u0022\u003EUsername\u003C\/label\u003E\n \u003Cinput autocorrect=\u0022none\u0022 autocapitalize=\u0022none\u0022 spellcheck=\u0022false\u0022 autofocus=\u0022autofocus\u0022 autocomplete=\u0022username\u0022 data-drupal-selector=\u0022edit-name\u0022 type=\u0022text\u0022 id=\u0022edit-name\u0022 name=\u0022name\u0022 value=\u0022\u0022 size=\u002260\u0022 maxlength=\u002260\u0022 class=\u0022form-text required form-element form-element--type-text form-element--api-textfield\u0022 required=\u0022required\u0022 aria-required=\u0022true\u0022 \/\u003E\n\n \u003C\/div\u003E\n\u003Cdiv class=\u0022js-form-item form-item js-form-type-password form-item-pass js-form-item-pass\u0022\u003E\n \u003Clabel for=\u0022edit-pass\u0022 class=\u0022form-item__label js-form-required form-required\u0022\u003EPassword\u003C\/label\u003E\n \u003Cinput autocomplete=\u0022current-password\u0022 data-drupal-selector=\u0022edit-pass\u0022 type=\u0022password\u0022 id=\u0022edit-pass\u0022 name=\u0022pass\u0022 size=\u002260\u0022 maxlength=\u0022128\u0022 class=\u0022form-text required form-element form-element--type-password form-element--api-password\u0022 required=\u0022required\u0022 aria-required=\u0022true\u0022 \/\u003E\n\n \u003C\/div\u003E\n\u003Cinput data-drupal-selector=\u0022form-6ngyrvfrmgfogyhp4piezpfq5nj09qszrlhrch4nvzi\u0022 type=\u0022hidden\u0022 name=\u0022form_build_id\u0022 value=\u0022form-6NGYrVfrmgfoGYHP4piEzpFq5Nj09QszRLhRCH4NvZI\u0022 \/\u003E\n\u003Cinput data-drupal-selector=\u0022edit-user-login-form\u0022 type=\u0022hidden\u0022 name=\u0022form_id\u0022 value=\u0022user_login_form\u0022 \/\u003E\n\u003Cdiv data-drupal-selector=\u0022edit-actions\u0022 class=\u0022form-actions js-form-wrapper form-wrapper\u0022 id=\u0022edit-actions\u0022\u003E\u003Cinput class=\u0022button--primary button js-form-submit form-submit\u0022 data-drupal-selector=\u0022edit-submit\u0022 type=\u0022submit\u0022 id=\u0022edit-submit\u0022 name=\u0022op\u0022 value=\u0022Log in\u0022 \/\u003E\n\u003C\/div\u003E\n"},"page_layout":"default","local_tasks":[]
  }
})